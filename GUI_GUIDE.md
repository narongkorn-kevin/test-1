# 🖥️ GUI Guide - Smoke Detector Auto-Placer

## 🚀 Quick Start

### เปิด GUI:

**macOS/Linux:**
```bash
./run_gui.sh
```

**Windows:**
```
run_gui.bat
```

หรือ:
```bash
python3 smoke_detector_gui.py
```

---

## 📖 วิธีใช้งาน (3 ขั้นตอน)

### 1. เลือกไฟล์ DXF

**วิธีที่ 1: คลิกที่กล่อง "Drop Zone"**
- คลิกที่พื้นที่สีเทา
- เลือกไฟล์ DXF จากหน้าต่างที่เปิดขึ้น

**วิธีที่ 2: ปุ่ม "เลือกไฟล์"**
- คลิกปุ่ม "📂 เลือกไฟล์"
- เลือกไฟล์ DXF

**วิธีที่ 3: Drag & Drop (ในอนาคต)**
- ลากไฟล์ DXF มาวางในกล่อง Drop Zone

### 2. ตั้งค่า (Optional)

**มาตรฐาน:**
- ✅ **NFPA 72** (default) - มาตรฐานอเมริกัน
- ⭕ EN 54-14 - มาตรฐานยุโรป

**Grid Pattern:**
- ✅ **Square** (default) - กริดสี่เหลี่ยม
- ⭕ Hex - กริดหกเหลี่ยม (ประหยัด ~13%)

### 3. กดปุ่ม "เริ่มวาง Smoke Detectors"

โปรแกรมจะ:
1. ลบ detectors เก่า (ถ้ามี)
2. วิเคราะห์ไฟล์ DXF
3. วาง detectors ตามมาตรฐาน
4. ตรวจสอบความถูกต้อง
5. สร้างไฟล์ผลลัพธ์

---

## 📊 หน้าจอ GUI

```
┌─────────────────────────────────────────────────────┐
│  🔥 Smoke Detector Auto-Placer                      │
│  วางตำแหน่ง Smoke Detector อัตโนมัติตามมาตรฐาน    │
├─────────────────────────────────────────────────────┤
│                                                     │
│  📁 เลือกไฟล์ DXF                                   │
│  ┌───────────────────────────────────────────────┐ │
│  │  🎯 ลากไฟล์ DXF มาวางที่นี่                   │ │
│  │     หรือคลิกปุ่ม 'เลือกไฟล์' ด้านล่าง        │ │
│  └───────────────────────────────────────────────┘ │
│  📄 ชื่อไฟล์ที่เลือก                                │
│  [📂 เลือกไฟล์]  [🗑️ ล้าง]                        │
│                                                     │
│  ⚙️ ตั้งค่า (Optional)                              │
│  มาตรฐาน: ⦿ NFPA 72  ⭕ EN 54-14                  │
│  Grid:    ⦿ Square   ⭕ Hex                        │
│                                                     │
│  [🚀 เริ่มวาง Smoke Detectors]                     │
│                                                     │
│  Progress: ████████████░░░░░░░░                    │
│  Status: กำลังประมวลผล...                          │
│                                                     │
│  📋 Log                                             │
│  ┌───────────────────────────────────────────────┐ │
│  │ ✅ เลือกไฟล์: example.dxf                     │ │
│  │ 📝 Step 1/3: ลบ detectors เก่า...             │ │
│  │ ✅ Removed 443 smoke detector symbols          │ │
│  │ 📝 Step 2/3: วาง smoke detectors...           │ │
│  │ ✅ Found 101 rooms                             │ │
│  │ ✅ Placed 99 detectors                         │ │
│  │ 📝 Step 3/3: ตรวจสอบผลลัพธ์...                │ │
│  │ ✅ COMPLIANT WITH NFPA 72 STANDARD             │ │
│  │ ✅ เสร็จสมบูรณ์!                               │ │
│  └───────────────────────────────────────────────┘ │
│                                                     │
│  [📂 เปิดไฟล์ผลลัพธ์]  [📁 เปิด Folder]           │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

## ✨ Features

### ✅ Auto-Processing
- ลบ detectors เก่าอัตโนมัติ
- ตรวจจับหน่วยวัดอัตโนมัติ
- คำนวณ offset อัตโนมัติ
- ตรวจสอบมาตรฐานอัตโนมัติ

### 📊 Real-time Progress
- แสดง progress bar
- แสดง log แบบ real-time
- แสดงสถานะปัจจุบัน

### 🎯 User-Friendly
- Interface ภาษาไทย
- ใช้งานง่าย 3 ขั้นตอน
- เปิดไฟล์ผลลัพธ์ได้ทันที

---

## 📂 Output Files

หลังจากประมวลผลเสร็จ จะได้:

1. **`input_clean.dxf`**
   - ไฟล์ที่ลบ detectors เก่าแล้ว

2. **`input_with_detectors_FINAL.dxf`** ⭐
   - ไฟล์ผลลัพธ์พร้อม detectors

คลิกปุ่ม:
- **"เปิดไฟล์ผลลัพธ์"** - เปิดไฟล์ DXF ใน default viewer
- **"เปิด Folder"** - เปิด folder ที่เก็บไฟล์

---

## 🔧 Troubleshooting

### GUI ไม่เปิด?

1. ตรวจสอบ Python:
```bash
python3 --version
```
ต้องเป็น Python 3.7 หรือสูงกว่า

2. ติดตั้ง dependencies:
```bash
pip install -r requirements.txt
```

3. รันโดยตรง:
```bash
python3 smoke_detector_gui.py
```

### ปุ่ม "เริ่มวาง" ไม่กดได้?

- ✅ ตรวจสอบว่าเลือกไฟล์ DXF แล้ว
- ✅ ตรวจสอบว่าไฟล์อยู่และเปิดได้

### ประมวลผลช้า?

- ไฟล์ DXF ขนาดใหญ่อาจใช้เวลา 1-2 นาที
- ดู progress bar และ log
- รอจนกว่าจะเสร็จ (ไม่ควรปิดโปรแกรม)

---

## 💡 Tips

1. **ไฟล์ DXF ต้องมี closed polygons** (room boundaries)
2. **ใช้ NFPA 72 สำหรับโครงการในไทย** (มาตรฐานที่ใช้กันทั่วไป)
3. **Hex grid ช่วยประหยัดต้นทุน** (~13% detectors น้อยกว่า)
4. **เปิดไฟล์ผลลัพธ์ใน AutoCAD** เพื่อคุณภาพดีที่สุด

---

## 📞 Additional Resources

- **Command Line:** ดู `README.md`
- **ปัญหาและวิธีแก้:** ดู `SOLUTION_TH.txt`
- **ตัวอย่างการใช้:** ดู `USAGE_TH.txt`

---

## 🎓 Demo

1. เปิด GUI:
```bash
./run_gui.sh
```

2. คลิก "เลือกไฟล์" และเลือก `RCP-FO10,11,12,16-AR-1.dxf`

3. คลิก "เริ่มวาง Smoke Detectors"

4. รอจนเสร็จ (~1-2 นาที)

5. คลิก "เปิดไฟล์ผลลัพธ์"

**Done!** 🎉

---

**Made with ❤️ for Fire Safety Engineers**

ใช้งานง่าย ๆ แค่ 3 คลิก! 🚀

